@using WebTracNghiemOnline.Models
@model IEnumerable<Question>

@{
    ViewBag.Title = "Question";
    Layout = "~/Views/Shared/_Layout.cshtml";
    IEnumerable<Answer> lstAnswer = ViewBag.Answers as IEnumerable<Answer>;
    int icount = 0;
    int iproduct = 1;
    int ipage = 1;
}
<script src="~/Scripts/jquery-3.5.1.min.js"></script>
<input style="display:none" name="ID_Quiz" value="@ViewBag.Id" />
@using (Html.BeginForm("Check", "Test"))
{

    foreach (var item in Model)
    {
        if (icount % iproduct == 0 && icount != 0)
        {
            ipage++;
        }
        <div class="@Url.Content("_one_question Page"+ipage.ToString())">
            <div class="left">
                <h3>Câu</h3>
                <h1>@item.ID_Question</h1>
                <h6>Điểm: @item.Score</h6>
            </div>
            <div class="right">
                <h3>@item.Content_of_Question</h3>
                <div class="Option">
                    @using (Html.BeginForm("Check", "Test"))
                    {
                        foreach (var it in lstAnswer)
                        {
                            if (it.ID_Question == item.ID_Question)
                            {
                                if (item.Type_of_Question == 1)
                                {
                                    @Html.RadioButton("Correct", false, new { @class = "Correct_Answer" })
                                }
                                else
                                {
                                    @Html.CheckBox("Correct", false, new { @class = "Correct_Answer" })
                                }
                                @Html.DisplayFor(m => it.Answer1, new { @class = "Answer" })<br />
                            }
                        }
                    }

                </div>
            </div>
        </div>
        icount++;
    }
    
}

<div class="Page">
    <h2>Câu hỏi</h2>
    @for (int i = 0; i < ipage; i++)
    {
        <button href="#" class="btnPage" data-PageNumber="@Url.Content("Page"+(i+1).ToString())">@(i+1) </button>
    }
</div>
@*<div style="display:none;">
    @foreach (var i in lstAnswer)
    {
        @Html.TextBox("Answers", i.Answer1, new { @class = "Answers" })
    }
</div>*@

<style>
    *{
        margin:0;padding:0;
    }
    body {
        width: 100%;
        background: #b4d0d9a1;
    }

    .Page{
        right:7%;
        top:10%;
        position:fixed;
        width:190px;
        display:flex;
        flex-wrap:wrap;
        justify-content:space-between;
    }

    .btnPage{
        width:35px;
        height:35px;
        text-align:center;
        border-radius:5px;
        cursor:pointer;
        margin: 2px 0px;
        font-weight:bold;
    }

    ._one_question {
        display: none;
        margin: 30px 0px;
    }

    .left {
        border: 2px solid black;
        width: 150px;
        background: wheat;
        height:165px;
    }

    .left h3 {
        margin-left: 10px;
        margin-bottom: 21px;
    }

    .left h1 {
        font-size: 80px;
        text-align: center;
        margin-top: -40px;
        margin-left: 44px;
    }

    .left h6{
        text-align:center;
    }

    .right{
        width:85%;
    }

    .Page1{
        display: block;
    }

    .Page h2 {
        width: 100%;
        color: #7e5748;
        font-family: segoe ui;
    }

    #Correct {
        margin-right: 10px;
    }
</style>

<script>
    //Phân trang
    $(".btnPage").click(function () {
        $("._one_question").hide();

        var page = $(this).attr("data-PageNumber");
        $('.' + page).show();
    });
    //Submit
    $('#btnSubmit').click(function () {
        if (confirm("Bạn có chắc chắn nộp bài?") == true) {
            Update_Submit();
        }
    })
    function Update_Submit() {
        var i = 0;
        $('.ID').each(function () {
            $(this).attr('value', parseInt(i / 4) + 1);
            $(this).attr('name', "[" + i + "].ID");
            i++;
        })
        i = 0;
        $('.Answers').each(function () {
            $(this).attr('name', "[" + i + "].Answer");
            i++;
        })
        i = 0;
        $('.Correct_Answer').each(function () {
            if ($(this).is(':checked') == true)
                $(this).attr('value', true);
            else
                $(this).attr('value', false);
            $(this).attr('name', "[" + i + "].Correct_Answer");
            i++;
        })
    }
</script>